/* ROX Chat Widget Theme: modern */
/* Currently same as classic. Customize as needed. */

/* ROX Chat Widget Theme: classic (original) */
/* Set defaults; JS will override via CSS variables on #rox-chat-widget */
#rox-chat-widget{--rox-primary:#F78C26;--rox-secondary:#1A1A1A;}

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

      #rox-chat-widget,
      #rox-chat-widget * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
        -webkit-font-smoothing: antialiased;
      }

      /* ========== CHAT BUBBLE ========== */
      #rox-chat-bubble {
        position: fixed;
        bottom: 24px;
        right: 24px;
        width: 66px;
        height: 66px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--rox-primary) 0%, #e07518 100%);
        border: none;
        cursor: pointer;
        box-shadow: 0 4px 20px rgba(247, 140, 38, 0.5), 0 0 0 0 rgba(247, 140, 38, 0.4);
        z-index: 999998;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1), 
                    box-shadow 0.3s ease,
                    opacity 0.3s ease;
        animation: rox-pulse 3s ease-in-out infinite;
      }
      @keyframes rox-pulse {
        0%, 100% { box-shadow: 0 4px 20px rgba(247, 140, 38, 0.5), 0 0 0 0 rgba(247, 140, 38, 0.4); }
        50% { box-shadow: 0 4px 20px rgba(247, 140, 38, 0.5), 0 0 0 10px rgba(247, 140, 38, 0); }
      }
      #rox-chat-bubble:hover {
        transform: scale(1.1);
        box-shadow: 0 6px 32px rgba(247, 140, 38, 0.6);
        animation: none;
      }
      #rox-chat-bubble:active { transform: scale(0.95); }
      #rox-chat-bubble.rox-hidden { 
        opacity: 0; pointer-events: none; transform: scale(0.5); animation: none;
      }
      #rox-chat-bubble svg { width: 30px; height: 30px; fill: white; }

      #rox-chat-badge {
        position: absolute; top: -3px; right: -3px;
        width: 22px; height: 22px; border-radius: 50%;
        background: #ef4444; color: white;
        font-size: 12px; font-weight: 700;
        display: none; align-items: center; justify-content: center;
        border: 2.5px solid white;
        animation: rox-badgePop 0.4s ease;
      }
      @keyframes rox-badgePop {
        0% { transform: scale(0); } 60% { transform: scale(1.3); } 100% { transform: scale(1); }
      }

      /* ========== CHAT WINDOW ========== */
      #rox-chat-window {
        position: fixed; bottom: 100px; right: 24px;
        width: 410px; max-width: calc(100vw - 32px);
        height: 620px; max-height: calc(100vh - 120px);
        border-radius: 20px; background: #f0f0f0;
        box-shadow: 0 20px 80px rgba(0,0,0,0.35), 0 0 0 1px rgba(0,0,0,0.08);
        z-index: 999999;
        display: flex; flex-direction: column; overflow: hidden;
        opacity: 0; transform: translateY(24px) scale(0.92); pointer-events: none;
        transition: opacity 0.35s ease, transform 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
      }
      #rox-chat-window.rox-open {
        opacity: 1; transform: translateY(0) scale(1); pointer-events: all;
      }

      /* ========== HEADER ========== */
      .rox-chat-header {
        background: linear-gradient(180deg, var(--rox-secondary) 0%, #111 100%);
        color: white; padding: 20px 20px 18px;
        display: flex; align-items: center; gap: 14px;
        flex-shrink: 0; position: relative;
      }
      .rox-chat-header::after {
        content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px;
        background: linear-gradient(90deg, var(--rox-primary), #e07518, var(--rox-primary));
      }
      .rox-chat-avatar {
        width: 46px; height: 46px; border-radius: 14px;
        background: var(--rox-primary);
        display: flex; align-items: center; justify-content: center;
        font-size: 15px; font-weight: 800; color: white; flex-shrink: 0;
        letter-spacing: -0.03em;
        box-shadow: 0 2px 8px rgba(247, 140, 38, 0.35);
      }
      .rox-chat-header-info { flex: 1; }
      .rox-chat-header-title { font-size: 16px; font-weight: 700; }
      .rox-chat-header-status {
        font-size: 12px; opacity: 0.65;
        display: flex; align-items: center; gap: 6px; margin-top: 3px;
      }
      .rox-status-dot {
        width: 8px; height: 8px; border-radius: 50%;
        background: #22c55e; display: inline-block;
        box-shadow: 0 0 6px rgba(34, 197, 94, 0.5);
      }
      .rox-chat-close {
        background: rgba(255,255,255,0.06);
        border: 1px solid rgba(255,255,255,0.1);
        color: white; cursor: pointer;
        width: 34px; height: 34px; border-radius: 10px;
        display: flex; align-items: center; justify-content: center;
        transition: all 0.2s;
      }
      .rox-chat-close:hover { background: rgba(255,255,255,0.12); }
      .rox-chat-close svg { width: 18px; height: 18px; fill: white; }

      /* ========== MESSAGES ========== */
      .rox-chat-messages {
        flex: 1; overflow-y: auto; padding: 20px 16px;
        display: flex; flex-direction: column; gap: 14px;
        scroll-behavior: smooth; background: #f0f0f0;
      }
      .rox-chat-messages::-webkit-scrollbar { width: 4px; }
      .rox-chat-messages::-webkit-scrollbar-track { background: transparent; }
      .rox-chat-messages::-webkit-scrollbar-thumb { background: #bbb; border-radius: 10px; }

      .rox-msg {
        max-width: 82%; padding: 13px 17px;
        font-size: 14px; line-height: 1.55; word-wrap: break-word;
        animation: rox-slideIn 0.3s ease;
      }
      @keyframes rox-slideIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .rox-msg-bot {
        align-self: flex-start; background: white; color: #222;
        border-radius: 4px 18px 18px 18px;
        box-shadow: 0 1px 6px rgba(0,0,0,0.07);
      }
      .rox-msg-user {
        align-self: flex-end; background: var(--rox-secondary); color: white;
        border-radius: 18px 4px 18px 18px;
      }

      /* ========== WELCOME CARD ========== */
      .rox-welcome-card {
        background: white; border-radius: 16px; padding: 20px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        animation: rox-slideIn 0.4s ease;
      }
      .rox-welcome-msg {
        font-size: 15px; color: #222; line-height: 1.5;
        margin-bottom: 16px; font-weight: 500;
      }
      .rox-welcome-buttons { display: flex; flex-direction: column; gap: 8px; }
      .rox-welcome-btn {
        display: flex; align-items: center; gap: 12px;
        background: #fafafa; border: 1.5px solid #e5e5e5;
        border-radius: 12px; padding: 14px 16px;
        font-size: 14px; font-weight: 600; color: #222;
        cursor: pointer; transition: all 0.2s ease;
        text-align: left; width: 100%;
      }
      .rox-welcome-btn:hover {
        border-color: var(--rox-primary); background: #fff8f0;
        transform: translateX(4px);
      }
      .rox-welcome-btn:active { transform: scale(0.98); }
      .rox-welcome-icon {
        width: 38px; height: 38px; border-radius: 10px;
        display: flex; align-items: center; justify-content: center;
        font-size: 18px; flex-shrink: 0;
      }
      .rox-welcome-icon-repair { background: #fef2e0; }
      .rox-welcome-icon-estimate { background: #e8f5e9; }
      .rox-welcome-icon-maintenance { background: #e3f2fd; }
      .rox-welcome-icon-appt { background: #f3e8fd; }
      .rox-welcome-btn-sub { font-size: 12px; font-weight: 400; color: #888; margin-top: 2px; }

      /* ========== TYPING ========== */
      .rox-typing {
        align-self: flex-start; display: flex; gap: 5px;
        padding: 14px 18px; background: white;
        border-radius: 4px 18px 18px 18px;
        box-shadow: 0 1px 6px rgba(0,0,0,0.07);
        animation: rox-slideIn 0.2s ease;
      }
      .rox-typing-dot {
        width: 8px; height: 8px; border-radius: 50%; background: #aaa;
        animation: rox-typingBounce 1.4s ease-in-out infinite;
      }
      .rox-typing-dot:nth-child(2) { animation-delay: 0.2s; }
      .rox-typing-dot:nth-child(3) { animation-delay: 0.4s; }
      @keyframes rox-typingBounce {
        0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
        30% { transform: translateY(-8px); opacity: 1; }
      }

      /* ========== QUICK REPLIES ========== */
      .rox-quick-replies {
        display: flex; flex-wrap: wrap; gap: 8px; padding: 6px 0;
        animation: rox-slideIn 0.3s ease 0.1s both;
      }
      .rox-quick-btn {
        background: white; color: var(--rox-secondary);
        border: 1.5px solid #ddd; border-radius: 24px;
        padding: 10px 18px; font-size: 13.5px; font-weight: 600;
        cursor: pointer; transition: all 0.2s ease;
        white-space: nowrap; box-shadow: 0 1px 3px rgba(0,0,0,0.04);
      }
      .rox-quick-btn:hover {
        background: var(--rox-primary); color: white;
        border-color: var(--rox-primary);
        transform: translateY(-2px);
        box-shadow: 0 4px 14px rgba(247, 140, 38, 0.35);
      }
      .rox-quick-btn:active { transform: scale(0.97); }

      /* ========== INPUT ========== */
      .rox-chat-input-area {
        padding: 14px 16px 18px; background: white;
        border-top: 1px solid #e5e5e5;
        display: flex; gap: 10px; align-items: center; flex-shrink: 0;
      }
      .rox-chat-input {
        flex: 1; border: 1.5px solid #e0e0e0; border-radius: 24px;
        padding: 11px 18px; font-size: 14px; outline: none;
        resize: none; max-height: 80px; line-height: 1.4;
        transition: border-color 0.2s, box-shadow 0.2s;
        font-family: inherit; color: #222; background: #fafafa;
      }
      .rox-chat-input:focus { 
        border-color: var(--rox-primary); 
        box-shadow: 0 0 0 3px rgba(247, 140, 38, 0.12);
        background: white;
      }
      .rox-chat-input::placeholder { color: #aaa; }
      .rox-chat-input:disabled { background: #f3f3f3; cursor: not-allowed; }
      .rox-chat-send {
        width: 44px; height: 44px; border-radius: 50%;
        background: linear-gradient(135deg, var(--rox-primary) 0%, #e07518 100%);
        border: none; cursor: pointer;
        display: flex; align-items: center; justify-content: center;
        flex-shrink: 0; transition: all 0.2s;
        box-shadow: 0 2px 8px rgba(247, 140, 38, 0.3);
      }
      .rox-chat-send:hover { transform: scale(1.05); box-shadow: 0 4px 14px rgba(247, 140, 38, 0.45); }
      .rox-chat-send:active { transform: scale(0.92); }
      .rox-chat-send:disabled { background: #ddd; box-shadow: none; cursor: not-allowed; }
      .rox-chat-send svg { width: 18px; height: 18px; fill: white; }

      /* ========== BOOKING CARD ========== */
      .rox-booking-card {
        background: linear-gradient(135deg, #f0fdf4, #ecfdf5);
        border: 1.5px solid #86efac; border-radius: 14px;
        padding: 18px; margin: 4px 0; max-width: 82%;
        animation: rox-slideIn 0.4s ease;
      }
      .rox-booking-card-title {
        font-size: 13px; font-weight: 700; color: #166534;
        text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 10px;
      }
      .rox-booking-card-detail { font-size: 14px; color: #15803d; margin: 5px 0; font-weight: 500; }

      /* ========== MOBILE ========== */
      @media (max-width: 480px) {
        #rox-chat-window {
          bottom: 0; right: 0; width: 100vw; height: 100vh;
          max-height: 100vh; border-radius: 0;
        }
        #rox-chat-bubble { bottom: 16px; right: 16px; width: 58px; height: 58px; }
        #rox-chat-bubble svg { width: 26px; height: 26px; }
      }
